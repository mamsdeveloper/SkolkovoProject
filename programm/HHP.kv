<MainWidget>:
    canvas.before:
        Rectangle:
            source: "background.png"
            pos: self.pos
            size: self.size
#
#
#
<MainScreen>:
    path: ""
  
    MDGridLayout:
        cols: 1
        pos_hint: {"center_x": .5, "center_y": .4}
        adaptive_height: True
        spacing: 60

        AnchorLayout:
            anchor_x: "center"

            FloatLayout:
                size_hint: None, None
                width: 489 // 1.5
                height: 75 // 1.5

                Image:
                    opacity: .7
                    source: "shd_input.png"
                    size_hint: None, None
                    width: 513 // 1.5 # DEBUG
                    height: 99 // 1.5 # DEBUG
                    center: self.parent.center
                    keep_ratio: True
                    allow_stretch: True

                Image:
                    source: "input.png"
                    pos: self.parent.pos
                    keep_ratio: False
                    allow_stretch: True
  
                GlassInput:
                    id: input
                    
        AnchorLayout:
            anchor_x: "center"
            size_hint: 1, None
            height: 75 // 1.5

            MDGridLayout:
                cols: 2
                size_hint: None, 1
                width: 489 // 1.5

                GlassButton:
                    text: "VIEW"
                    image: "l_button.png"
                    anchor_x: "left"
                    action: root.redirect_to_view
            
                GlassButton:
                    text: "SAVE"
                    image: "r_button.png"
                    anchor_x: "right"
                    action: root.save_keys_file

#
#
#
<GlassInput>:
    size_hint: None, None
    width: 415 // 1.5
    center_x: self.parent.center_x 
    y: self.parent.y - 5
    color_mode: "custom"
    line_color_normal: 1, 1, 1, .7
    line_color_focus: 0, 0, 0, .28
    font_size: 32 // 1.5
    on_text: self.parent.parent.parent.parent.path = self.text
#
#
#
<GlassButton>:
    text: ""
    image: ""
    action: None

    FloatLayout:
        size_hint: None, None
        width: 227 // 1.5 # DEBUG
        height: 75 // 1.5 # DEBUG
        
        Image:
            opacity: .7
            source: "shd_button.png"
            size_hint: None, None
            width: 251 // 1.5 # DEBUG
            height: 99 // 1.5 # DEBUG
            center: self.parent.center
            keep_ratio: True
            allow_stretch: True
            
        Image:
            source: root.image
            keep_ratio: False
            allow_stretch: True
            pos: self.parent.pos

        MDFlatButton:
            size_hint: 1, 1
            theme_text_color: "Hint"
            pos: self.parent.pos
            opacity: .6
            on_release: root.action()

        Label:
            x: self.parent.x
            y: self.parent.y - 6 // 1.5
            text: root.text
            font_size: 50 // 1.5
            font_name: "Candara.ttf"
            # color: .7, .25, .50, .9
            color: 0, 0, 0, .28
#
#
#
<ViewScreen>:
    ScrollView:
        size_hint: 1, .9
        center: root.center

        StackLayout:
            id: layout
            size_hint: 1, None
            height: self.minimum_height
            padding: [47 // 1.5, 0]
            spacing: 62 // 1.5

    MDIconButton:
        center: root.width - 20, root.height - 20
        icon: "close"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, .4
        on_release: root.redirect_to_main()
#
#
#
<KeyCard>:
    size_hint: None, None
    width: 92 // 1.5 if not root.is_wide else 258 // 1.5
    height: 92 // 1.5

    FloatLayout: 
        Image:
            opacity: .4
            source: "shd_key_button.png" if not root.is_wide else "shd_key_button_wide.png" 
            size_hint: None, None
            width: 110 // 1.5 if not root.is_wide else 276 // 1.5
            height: 110 // 1.5 
            center: self.parent.center
            keep_ratio: True
            allow_stretch: True
            
        Image:
            opacity: .7
            source: "key_button.png" if not root.is_wide else "key_button_wide.png"
            keep_ratio: False
            allow_stretch: True
            pos: self.parent.pos

        Label:
            x: self.parent.x
            y: self.parent.y - 8 // 1.5
            text: root.key
            font_size: (60 - 2 * len(self.text)) // 1.5
            font_name: "Candara.ttf"
            color: 0, 0, 0, .28

        Label:
            center: root.x+root.width - 10 // 1.5, root.y + 10 // 1.5
            text: root.count
            size_hint: None, None
            size: 45 // 1.5, 45 // 1.5
            font_size: (26 - 2*len(self.text)) // 1.5
            font_name: "Candara.ttf"
            color: 0, 0, 0, .4

            canvas.before:
                Color:
                    rgba: 1, 1, 1, .9
                Ellipse:
                    pos: self.pos
                    size: self.size

        
        
    




  

        

